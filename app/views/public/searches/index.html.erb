<div class="container" style="max-width: 1200px; margin: 0 auto; padding: 20px;">
  <div class="row" style="display: flex; flex-direction: column; align-items: center;">
    <div class="col-md-12" style="width: 100%; text-align: center;">
      <%= form_with url: search_path, method: :get, local: true do |f| %>
        <div class="search-form m-4" style="margin-bottom: 20px;">
          <%= f.label :keyword, "キーワードで検索", style: "display: block; margin-bottom: 10px; font-weight: bold;" %>
          <%= f.text_field :keyword, value: params[:keyword], placeholder: "山小屋の名前を入力", 
            style: "width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 20px;" %>

        <%= f.label :sort, "並び順", style: "display: block; margin-bottom: 10px; font-weight: bold;" %>
          <%= f.select :sort, 
            [
              ['評価の高い順', 'rating_desc'],
              ['新しい投稿順', 'newest'],
              ['レビュー数の多い順', 'review_count_desc']
            ], 
            { selected: params[:sort] }, 
            style: "width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 20px;" %>

          <%= f.submit "検索", style: "padding: 10px 20px; background-color: #28A745; color: #fff; border: none; border-radius: 4px; cursor: pointer;" %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="results-container m-5" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
    <% if @huts.any? %>
      <h3 style="width: 100%; text-align: center; margin-bottom: 20px;">検索結果</h3>
      <% @huts.each do |hut| %>
        <div class="card" style="width: 18rem; border: 1px solid #ddd; border-radius: 4px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); overflow: hidden; text-align: center;">
          <div class="card-body" style="padding: 20px;">
            <h5 class="card-title" style="font-size: 1.25rem; margin-bottom: 10px;"><%= hut.name %></h5>
            <div>評価平均：<%= render "public/huts/average", hut: hut %></div>
            <div>総レビュー数：<%= hut.reviews.count %></div>
            <%= link_to "詳細を見る", hut_path(hut), class: "btn btn-primary mt-2" %>
          </div>
        </div>
      <% end %>
    <% else %>
      <p style="width: 100%; text-align: center; color: #666;">該当する山小屋が見つかりませんでした。</p>
    <% end %>
  </div>
</div>

<%= render 'layouts/pagination', object: @huts %>
